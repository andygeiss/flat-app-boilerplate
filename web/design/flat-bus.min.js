'use strict';const flat={};flat.Bus=new class{constructor(){this.topics=[]}init(){let a=this;window.addEventListener("message",b=>{let c=b.data.content,d=b.data.topic;a.topics.forEach(a=>{a===d.name&&d.commands.forEach(a=>{a(c)})})})}publish(a,b){window.postMessage({topic:a,content:b},"*")}subscribe(a,b){let c=this;0===c.topics.length&&(c.topics=[{name:a,commands:[]}]);let d=!1;c.topics.forEach((e,f)=>{e.name===a&&(c.topics[f].commands.push(b),d=!0)});d||c.topics.push({name:a,commands:[b]})}};
